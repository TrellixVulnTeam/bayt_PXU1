/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * @record
 */
export function IPosition() { }
if (false) {
    /** @type {?} */
    IPosition.prototype.x;
    /** @type {?} */
    IPosition.prototype.y;
    /** @type {?|undefined} */
    IPosition.prototype.rotate;
    /** @type {?|undefined} */
    IPosition.prototype.scaleX;
    /** @type {?|undefined} */
    IPosition.prototype.scaleY;
}
var Position = /** @class */ (function () {
    function Position(x, y, rotate, scaleX, scaleY) {
        if (rotate === void 0) { rotate = 0; }
        if (scaleX === void 0) { scaleX = 1; }
        if (scaleY === void 0) { scaleY = 1; }
        this.x = x;
        this.y = y;
        this.rotate = rotate;
        this.scaleX = scaleX;
        this.scaleY = scaleY;
    }
    /**
     * @param {?} e
     * @param {?=} el
     * @return {?}
     */
    Position.fromEvent = /**
     * @param {?} e
     * @param {?=} el
     * @return {?}
     */
    function (e, el) {
        if (el === void 0) { el = null; }
        /**
         * Fix issue: Resize doesn't work on Windows10 IE11 (and on some windows 7 IE11)
         * https://github.com/xieziyu/ngx-draggable-resize/issues/164
         * e instanceof MouseEvent check returns false on IE11
         */
        if (this.isMouseEvent(e)) {
            return new Position(e.clientX, e.clientY);
        }
        else {
            if (el === null || e.changedTouches.length === 1) {
                return new Position(e.changedTouches[0].clientX, e.changedTouches[0].clientY);
            }
            /**
             * Fix issue: Multiple phone draggables at the same time
             * https://github.com/xieziyu/ngx-draggable-resize/issues/128
             */
            for (var i = 0; i < e.changedTouches.length; i++) {
                if (e.changedTouches[i].target === el) {
                    return new Position(e.changedTouches[i].clientX, e.changedTouches[i].clientY);
                }
            }
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    Position.isMouseEvent = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        return Object.prototype.toString.apply(e).indexOf("MouseEvent") === 8;
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    Position.isIPosition = /**
     * @param {?} obj
     * @return {?}
     */
    function (obj) {
        return !!obj && "x" in obj && "y" in obj;
    };
    /**
     * @param {?} el
     * @return {?}
     */
    Position.getCurrent = /**
     * @param {?} el
     * @return {?}
     */
    function (el) {
        /** @type {?} */
        var pos = new Position(0, 0, 0, 0, 0);
        if (window) {
            /** @type {?} */
            var computed = window.getComputedStyle(el);
            if (computed) {
                /** @type {?} */
                var x = parseInt(computed.getPropertyValue("left"), 10);
                /** @type {?} */
                var y = parseInt(computed.getPropertyValue("top"), 10);
                pos.x = isNaN(x) ? 0 : x;
                pos.y = isNaN(y) ? 0 : y;
            }
            return pos;
        }
        else {
            console.error("Not Supported!");
            return null;
        }
    };
    /**
     * @param {?} p
     * @return {?}
     */
    Position.copy = /**
     * @param {?} p
     * @return {?}
     */
    function (p) {
        return new Position(0, 0, 0, 1, 1).set(p);
    };
    Object.defineProperty(Position.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return {
                x: this.x,
                y: this.y,
                rotate: this.rotate,
                scaleX: this.scaleX,
                scaleY: this.scaleY
            };
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} p
     * @return {THIS}
     */
    Position.prototype.add = /**
     * @template THIS
     * @this {THIS}
     * @param {?} p
     * @return {THIS}
     */
    function (p) {
        (/** @type {?} */ (this)).x += p.x;
        (/** @type {?} */ (this)).y += p.y;
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} p
     * @return {THIS}
     */
    Position.prototype.subtract = /**
     * @template THIS
     * @this {THIS}
     * @param {?} p
     * @return {THIS}
     */
    function (p) {
        (/** @type {?} */ (this)).x -= p.x;
        (/** @type {?} */ (this)).y -= p.y;
        return (/** @type {?} */ (this));
    };
    /**
     * @param {?} n
     * @return {?}
     */
    Position.prototype.multiply = /**
     * @param {?} n
     * @return {?}
     */
    function (n) {
        this.x *= n;
        this.y *= n;
    };
    /**
     * @param {?} n
     * @return {?}
     */
    Position.prototype.divide = /**
     * @param {?} n
     * @return {?}
     */
    function (n) {
        this.x /= n;
        this.y /= n;
    };
    /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    Position.prototype.reset = /**
     * @template THIS
     * @this {THIS}
     * @return {THIS}
     */
    function () {
        (/** @type {?} */ (this)).x = 0;
        (/** @type {?} */ (this)).y = 0;
        (/** @type {?} */ (this)).rotate = 0;
        (/** @type {?} */ (this)).scaleX = 1;
        (/** @type {?} */ (this)).scaleY = 1;
        return (/** @type {?} */ (this));
    };
    /**
     * @template THIS
     * @this {THIS}
     * @param {?} p
     * @return {THIS}
     */
    Position.prototype.set = /**
     * @template THIS
     * @this {THIS}
     * @param {?} p
     * @return {THIS}
     */
    function (p) {
        (/** @type {?} */ (this)).x = p.x;
        (/** @type {?} */ (this)).y = p.y;
        (/** @type {?} */ (this)).rotate = p.rotate;
        (/** @type {?} */ (this)).scaleY = p.scaleY;
        (/** @type {?} */ (this)).scaleX = p.scaleX;
        return (/** @type {?} */ (this));
    };
    return Position;
}());
export { Position };
if (false) {
    /** @type {?} */
    Position.prototype.x;
    /** @type {?} */
    Position.prototype.y;
    /** @type {?} */
    Position.prototype.rotate;
    /** @type {?} */
    Position.prototype.scaleX;
    /** @type {?} */
    Position.prototype.scaleY;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9zaXRpb24uanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtZHJhZ2dhYmxlLXJlc2l6ZS8iLCJzb3VyY2VzIjpbImxpYi9tb2RlbHMvcG9zaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLCtCQU1DOzs7SUFMQyxzQkFBVTs7SUFDVixzQkFBVTs7SUFDViwyQkFBZ0I7O0lBQ2hCLDJCQUFnQjs7SUFDaEIsMkJBQWdCOztBQUdsQjtJQUVFLGtCQUNTLENBQVMsRUFDVCxDQUFTLEVBQ1QsTUFBVSxFQUNWLE1BQVUsRUFDVixNQUFVO1FBRlYsdUJBQUEsRUFBQSxVQUFVO1FBQ1YsdUJBQUEsRUFBQSxVQUFVO1FBQ1YsdUJBQUEsRUFBQSxVQUFVO1FBSlYsTUFBQyxHQUFELENBQUMsQ0FBUTtRQUNULE1BQUMsR0FBRCxDQUFDLENBQVE7UUFDVCxXQUFNLEdBQU4sTUFBTSxDQUFJO1FBQ1YsV0FBTSxHQUFOLE1BQU0sQ0FBSTtRQUNWLFdBQU0sR0FBTixNQUFNLENBQUk7SUFDaEIsQ0FBQzs7Ozs7O0lBRUcsa0JBQVM7Ozs7O0lBQWhCLFVBQWlCLENBQTBCLEVBQUUsRUFBYztRQUFkLG1CQUFBLEVBQUEsU0FBYztRQUN6RDs7OztXQUlHO1FBQ0gsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ3hCLE9BQU8sSUFBSSxRQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDM0M7YUFBTTtZQUNMLElBQUksRUFBRSxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsY0FBYyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7Z0JBQ2hELE9BQU8sSUFBSSxRQUFRLENBQ2pCLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUMzQixDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FDNUIsQ0FBQzthQUNIO1lBRUQ7Oztl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QUMsTUFBTSxDQUFDO1FBQ3ZCLG1CQUFBLElBQUksRUFBQSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDO1FBQ3ZCLG1CQUFBLElBQUksRUFBQSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDO1FBQ3ZCLE9BQU8sbUJBQUEsSUFBSSxFQUFBLENBQUM7SUFDZCxDQUFDO0lBQ0gsZUFBQztBQUFELENBQUMsQUF4SEQsSUF3SEM7Ozs7SUFySEcscUJBQWdCOztJQUNoQixxQkFBZ0I7O0lBQ2hCLDBCQUFpQjs7SUFDakIsMEJBQWlCOztJQUNqQiwwQkFBaUIiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIElQb3NpdGlvbiB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuICByb3RhdGU/OiBudW1iZXI7XHJcbiAgc2NhbGVYPzogbnVtYmVyO1xyXG4gIHNjYWxlWT86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFBvc2l0aW9uIGltcGxlbWVudHMgSVBvc2l0aW9uIHtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgeDogbnVtYmVyLFxyXG4gICAgcHVibGljIHk6IG51bWJlcixcclxuICAgIHB1YmxpYyByb3RhdGUgPSAwLFxyXG4gICAgcHVibGljIHNjYWxlWCA9IDEsXHJcbiAgICBwdWJsaWMgc2NhbGVZID0gMVxyXG4gICkge31cclxuXHJcbiAgc3RhdGljIGZyb21FdmVudChlOiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCwgZWw6IGFueSA9IG51bGwpIHtcclxuICAgIC8qKlxyXG4gICAgICogRml4IGlzc3VlOiBSZXNpemUgZG9lc24ndCB3b3JrIG9uIFdpbmRvd3MxMCBJRTExIChhbmQgb24gc29tZSB3aW5kb3dzIDcgSUUxMSlcclxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS94aWV6aXl1L25neC1kcmFnZ2FibGUtcmVzaXplL2lzc3Vlcy8xNjRcclxuICAgICAqIGUgaW5zdGFuY2VvZiBNb3VzZUV2ZW50IGNoZWNrIHJldHVybnMgZmFsc2Ugb24gSUUxMVxyXG4gICAgICovXHJcbiAgICBpZiAodGhpcy5pc01vdXNlRXZlbnQoZSkpIHtcclxuICAgICAgcmV0dXJuIG5ldyBQb3NpdGlvbihlLmNsaWVudFgsIGUuY2xpZW50WSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoZWwgPT09IG51bGwgfHwgZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBvc2l0aW9uKFxyXG4gICAgICAgICAgZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYLFxyXG4gICAgICAgICAgZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEZpeCBpc3N1ZTogTXVsdGlwbGUgcGhvbmUgZHJhZ2dhYmxlcyBhdCB0aGUgc2FtZSB0aW1lXHJcbiAgICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS94aWV6aXl1L25neC1kcmFnZ2FibGUtcmVzaXplL2lzc3Vlcy8xMjhcclxuICAgICAgICovXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChlLmNoYW5nZWRUb3VjaGVzW2ldLnRhcmdldCA9PT0gZWwpIHtcclxuICAgICAgICAgIHJldHVybiBuZXcgUG9zaXRpb24oXHJcbiAgICAgICAgICAgIGUuY2hhbmdlZFRvdWNoZXNbaV0uY2xpZW50WCxcclxuICAgICAgICAgICAgZS5jaGFuZ2VkVG91Y2hlc1tpXS5jbGllbnRZXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzTW91c2VFdmVudChlOiBNb3VzZUV2ZW50IHwgVG91Y2hFdmVudCk6IGUgaXMgTW91c2VFdmVudCB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShlKS5pbmRleE9mKFwiTW91c2VFdmVudFwiKSA9PT0gODtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc0lQb3NpdGlvbihvYmopOiBvYmogaXMgSVBvc2l0aW9uIHtcclxuICAgIHJldHVybiAhIW9iaiAmJiBcInhcIiBpbiBvYmogJiYgXCJ5XCIgaW4gb2JqO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldEN1cnJlbnQoZWw6IEVsZW1lbnQpIHtcclxuICAgIGxldCBwb3MgPSBuZXcgUG9zaXRpb24oMCwgMCwwLDAsMCk7XHJcblxyXG4gICAgaWYgKHdpbmRvdykge1xyXG4gICAgICBjb25zdCBjb21wdXRlZCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKTtcclxuICAgICAgaWYgKGNvbXB1dGVkKSB7XHJcbiAgICAgICAgbGV0IHggPSBwYXJzZUludChjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKFwibGVmdFwiKSwgMTApO1xyXG4gICAgICAgIGxldCB5ID0gcGFyc2VJbnQoY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZShcInRvcFwiKSwgMTApO1xyXG4gICAgICAgIHBvcy54ID0gaXNOYU4oeCkgPyAwIDogeDtcclxuICAgICAgICBwb3MueSA9IGlzTmFOKHkpID8gMCA6IHk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHBvcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJOb3QgU3VwcG9ydGVkIVwiKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgY29weShwOiBJUG9zaXRpb24pIHtcclxuICAgIHJldHVybiBuZXcgUG9zaXRpb24oMCwgMCwgMCwgMSwgMSkuc2V0KHApO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHZhbHVlKCk6IElQb3NpdGlvbiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB4OiB0aGlzLngsXHJcbiAgICAgIHk6IHRoaXMueSxcclxuICAgICAgcm90YXRlOiB0aGlzLnJvdGF0ZSxcclxuICAgICAgc2NhbGVYOiB0aGlzLnNjYWxlWCxcclxuICAgICAgc2NhbGVZOiB0aGlzLnNjYWxlWVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGFkZChwOiBJUG9zaXRpb24pIHtcclxuICAgIHRoaXMueCArPSBwLng7XHJcbiAgICB0aGlzLnkgKz0gcC55O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBzdWJ0cmFjdChwOiBJUG9zaXRpb24pIHtcclxuICAgIHRoaXMueCAtPSBwLng7XHJcbiAgICB0aGlzLnkgLT0gcC55O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBtdWx0aXBseShuOiBudW1iZXIpIHtcclxuICAgIHRoaXMueCAqPSBuO1xyXG4gICAgdGhpcy55ICo9IG47XHJcbiAgfVxyXG5cclxuICBkaXZpZGUobjogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnggLz0gbjtcclxuICAgIHRoaXMueSAvPSBuO1xyXG4gIH1cclxuXHJcbiAgcmVzZXQoKSB7XHJcbiAgICB0aGlzLnggPSAwO1xyXG4gICAgdGhpcy55ID0gMDtcclxuICAgIHRoaXMucm90YXRlID0gMDtcclxuICAgIHRoaXMuc2NhbGVYID0gMTtcclxuICAgIHRoaXMuc2NhbGVZID0gMTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgc2V0KHA6IElQb3NpdGlvbikge1xyXG4gICAgdGhpcy54ID0gcC54O1xyXG4gICAgdGhpcy55ID0gcC55O1xyXG4gICAgdGhpcy5yb3RhdGUgPSBwLnJvdGF0ZTtcclxuICAgIHRoaXMuc2NhbGVZID0gcC5zY2FsZVk7XHJcbiAgICB0aGlzLnNjYWxlWCA9IHAuc2NhbGVYO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG59XHJcbiJdfQ==